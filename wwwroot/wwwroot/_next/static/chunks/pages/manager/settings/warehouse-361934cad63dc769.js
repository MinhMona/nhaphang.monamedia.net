(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2277],{42152:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manager/settings/warehouse",function(){return c(87026)}])},87026:function(a,b,c){"use strict";c.r(b);var d=c(28520),e=c.n(d),f=c(85893),g=c(85402),h=c(26713),i=c(87961),j=c(67294),k=c(87536),l=c(88767),m=c(72132),n=c(48880),o=c(61474),p=c(28004),q=c(12023),r=c(93702),s=c(12954);function t(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function u(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){t(f,d,e,g,h,"next",a)}function h(a){t(f,d,e,g,h,"throw",a)}g(void 0)})}}function v(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function w(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){v(a,b,c[b])})}return a}var x=j.memo(function(a){var b=a.onCancel,c=a.visible,d=a.refetchFrom,h=a.refetchTo,i=(0,l.useQueryClient)(),p=(0,k.cI)({defaultValues:{Name:"",Address:"",IsChina:1}}),q=p.control,r=p.handleSubmit,s=p.reset;(0,j.useEffect)(function(){s({Name:"",Address:"",IsChina:1})},[c]);var t=u(e().mark(function a(c){var f,g;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:f=w({},c,{IsChina:Boolean(c.IsChina)}),g=m.Am.loading("Đang xử l\xfd ..."),c.IsChina?(n.RT.create(f).then(function(){i.invalidateQueries(["warehouseTQCatalogue"]),m.Am.update(g,{render:"Th\xeam kho th\xe0nh c\xf4ng!",type:"success",isLoading:!1,autoClose:1000}),d()}).catch(function(a){var b,c,d;m.Am.update(g,{render:null===(b=a)|| void 0===b?void 0:null===(c=b.response)|| void 0===c?void 0:null===(d=c.data)|| void 0===d?void 0:d.ResultMessage,type:"error",isLoading:!1,autoClose:1000})}),b()):(n.SG.create(f).then(function(){i.invalidateQueries(["warehouseVNCatalogue"]),m.Am.update(g,{render:"Th\xeam kho th\xe0nh c\xf4ng!",type:"success",isLoading:!1,autoClose:1000}),h()}).catch(function(a){var b,c,d;m.Am.update(g,{render:null===(b=a)|| void 0===b?void 0:null===(c=b.response)|| void 0===c?void 0:null===(d=c.data)|| void 0===d?void 0:d.ResultMessage,type:"error",isLoading:!1,autoClose:1000})}),b());case 3:case"end":return a.stop()}},a)}));return(0,f.jsx)(g.Z,{onCancel:b,visible:c,closable:!1,footer:!1,children:(0,f.jsxs)(o.EcG,{children:[(0,f.jsx)(o.EcG.Header,{onCancel:b,children:(0,f.jsx)("div",{className:"w-full",children:(0,f.jsx)("p",{children:"Th\xeam kho"})})}),(0,f.jsxs)(o.EcG.Body,{children:[(0,f.jsx)(o.ytj,{label:"T\xean kho",control:q,name:"Name",placeholder:"Nhập t\xean kho",inputContainerClassName:"mb-2",rules:{required:"Vui l\xf2ng nhập t\xean kho!"}}),(0,f.jsx)(o.ytj,{label:"Địa chỉ kho",control:q,name:"Address",placeholder:"Nhập địa chỉ kho",inputContainerClassName:"mb-2",rules:{required:"Vui l\xf2ng nhập đia chỉ kho!"}}),(0,f.jsx)(o.ihX,{label:"Kho ở đ\xe2u?",data:[{Name:"Trung Quốc",Id:1},{Name:"Việt Nam",Id:0},],select:{label:"Name",value:"Id"},control:q,name:"IsChina",placeholder:"Chọn nơi đặt kho!",rules:{required:"Vui l\xf2ng chọn nơi đặt kho!"}})]}),(0,f.jsxs)(o.EcG.Footer,{children:[(0,f.jsx)(o.zxk,{title:"Th\xeam mới",btnClass:"!bg-main mr-2",onClick:r(t)}),(0,f.jsx)(o.zxk,{title:"Hủy",btnClass:"!bg-red",onClick:function(){b()}})]})]})})}),y=j.memo(function(a){var b=a.onCancel,c=a.visible,d=a.refetchMethod,h=(0,l.useQueryClient)(),i=(0,k.cI)({defaultValues:{Name:""}}),j=i.control,p=i.handleSubmit,q=i.reset,r=u(e().mark(function a(c){var f;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b(),f=m.Am.loading("Đang xử l\xfd ...");try{n.RX.create(c).then(function(){h.invalidateQueries(["shippingTypeToWarehouseCatalogue"]),m.Am.update(f,{render:"Th\xeam phương thức th\xe0nh c\xf4ng!",type:"success",isLoading:!1,autoClose:1000}),d(),q()})}catch(e){m.Am.update(f,{render:"Th\xeam phương thức thất bại!",type:"success",isLoading:!1,autoClose:1000})}case 3:case"end":return a.stop()}},a)}));return(0,f.jsx)(g.Z,{onCancel:b,visible:c,closable:!1,footer:!1,children:(0,f.jsxs)(o.EcG,{children:[(0,f.jsx)(o.EcG.Header,{onCancel:b,children:(0,f.jsx)("div",{className:"w-full",children:(0,f.jsx)("p",{children:"Th\xeam phương thức vận chuyển"})})}),(0,f.jsx)(o.EcG.Body,{children:(0,f.jsx)(o.ytj,{label:"T\xean phương thức vận chuyển",control:j,name:"Name",placeholder:"T\xean phương thức vận chuyển",rules:{required:"Vui l\xf2ng nhập t\xean phương thức vận chuyển!"}})}),(0,f.jsxs)(o.EcG.Footer,{children:[(0,f.jsx)(o.zxk,{title:"Th\xeam",btnClass:"!bg-main mr-2",onClick:p(r)}),(0,f.jsx)(o.zxk,{title:"Hủy",btnClass:"!bg-red",onClick:function(){b()}})]})]})})}),z=j.memo(function(a){var b=a.onCancel,c=a.visible,d=a.defaultValues,e=a.refetchFrom,h=a.refetchTo,i=a.refetchMethod,j=(0,l.useQueryClient)(),p=(0,k.cI)({mode:"onBlur",defaultValues:d}),q=p.control,r=p.handleSubmit;return p.reset,(0,f.jsx)(g.Z,{onCancel:b,visible:c,closable:!1,footer:!1,children:(0,f.jsxs)(o.EcG,{children:[(0,f.jsx)(o.EcG.Header,{onCancel:b,children:(0,f.jsx)("div",{className:"w-full",children:(0,f.jsx)("p",{children:"Cập nhật"})})}),(0,f.jsx)(o.EcG.Body,{children:(null==d?void 0:d.IsWareHouse)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.ytj,{label:"T\xean kho",control:q,name:"Name",placeholder:"Nhập t\xean kho",inputContainerClassName:"mb-2",rules:{required:"Vui l\xf2ng nhập t\xean kho!"}}),(0,f.jsx)(o.ytj,{label:"Địa chỉ kho",control:q,name:"Address",placeholder:"Nhập địa chỉ kho",inputContainerClassName:"mb-2",rules:{required:"Vui l\xf2ng nhập đia chỉ kho!"}}),(0,f.jsx)(o.j7V,{control:q,name:"Active",label:"Active"})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.ytj,{label:"T\xean phương thức vận chuyển",control:q,name:"Name",placeholder:"T\xean phương thức vận chuyển",rules:{required:"Vui l\xf2ng nhập t\xean phương thức vận chuyển!"}}),(0,f.jsx)(o.j7V,{control:q,name:"Active",label:"Active"})]})}),(0,f.jsxs)(o.EcG.Footer,{children:[(0,f.jsx)(o.zxk,{title:"Cập nhật",btnClass:"!bg-main mr-2",onClick:r(function(a){var c=m.Am.loading("Đang xử l\xfd ...");if(!(null==d?void 0:d.IsWareHouse)){delete a.IsWareHouse,n.RX.update(a).then(function(){j.invalidateQueries(["shippingTypeToWarehouseCatalogue"]),i(),m.Am.update(c,{render:"Cập nhật th\xe0nh c\xf4ng!",type:"success",isLoading:!1,autoClose:1000})}).catch(function(a){return m.Am.update(c,{render:"Cập nhật thất bại!",type:"error",isLoading:!1,autoClose:1000})}),b();return}if(delete a.IsWareHouse,null==d?void 0:d.IsChina){n.RT.update(a).then(function(){e(),j.invalidateQueries(["warehouseTQCatalogue"]),m.Am.update(c,{render:"Cập nhật th\xe0nh c\xf4ng!",type:"success",isLoading:!1,autoClose:1000})}).catch(function(a){j.invalidateQueries(["warehouseVNCatalogue"]),m.Am.update(c,{render:"Cập nhật thất bại!",type:"error",isLoading:!1,autoClose:1000})}),b();return}if(!(null==d?void 0:d.IsChina)){n.SG.update(a).then(function(){h(),m.Am.update(c,{render:"Cập nhật th\xe0nh c\xf4ng!",type:"success",isLoading:!1,autoClose:1000})}).catch(function(a){return m.Am.update(c,{render:"Cập nhật thất bại!",type:"error",isLoading:!1,autoClose:1000})}),b();return}})}),(0,f.jsx)(o.zxk,{title:"Hủy",btnClass:"!bg-red",onClick:function(){b()}})]})]})})}),A=function(){var a=(0,j.useState)(!1),b=a[0],c=a[1],d=(0,j.useState)(!1),e=d[0],g=d[1],k=(0,j.useState)(!1),m=k[0],q=k[1],r=(0,j.useRef)(null),t=(0,l.useQuery)(["warehouseFromData"],function(){return n.RT.getList().then(function(a){return a.Data.Items})}),u=t.refetch,v=t.data,A=(0,l.useQuery)(["warehouseToData"],function(){return n.SG.getList().then(function(a){return a.Data.Items})}),B=A.refetch,C=A.data,D=(0,l.useQuery)(["shippingType"],function(){return n.RX.getList({PageSize:20,PageIndex:1}).then(function(a){return a.Data.Items})},{retry:!1}),E=D.refetch,F=D.data,G=[{title:"ID",dataIndex:"Id",align:"right"},{title:"Ng\xe0y tạo",dataIndex:"Created",render:function(a){return s.Jy.getVNDate(a,"DD/MM/YYYY - HH:mm:A")}},{title:"T\xean kho",dataIndex:"Name"},{dataIndex:"Address",title:"Địa chỉ"},{dataIndex:"Active",title:"Trạng th\xe1i",render:function(a,b,c){return(0,f.jsx)(p.Z,{color:a?"blue":"red",statusName:a?"Hiện":"Ẩn"})}},{title:function(){return(0,f.jsx)(f.Fragment,{children:"Nh\xe2n vi\xean cập nhật"})},dataIndex:"UpdatedBy"},{title:"Cập nhật mới nhất",dataIndex:"Updated",render:function(a){return a?s.Jy.getVNDate(a,"DD/MM/YYYY - HH:mm:A"):"---"}},{align:"right",title:"Thao t\xe1c",dataIndex:"action",render:function(a,b){return(0,f.jsx)(h.Z,{children:(0,f.jsx)(o.Kkx,{onClick:function(){r.current=w({},b,{IsWareHouse:!0}),q(!0)},title:"Cập nhật kho",icon:"fas fa-edit"})})}},];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(i.Z,{tabBarExtraContent:(0,f.jsxs)("div",{className:"",children:[(0,f.jsx)(o.hU,{onClick:function(){return c(!b)},title:"Th\xeam kho",icon:"fas fa-plus",showLoading:!0,btnClass:"!mr-4",toolip:"Th\xeam Kho",green:!0}),(0,f.jsx)(o.hU,{onClick:function(){return g(!e)},title:"Th\xeam phương thức",icon:"fas fa-plus",showLoading:!0,toolip:"Th\xeam Kho",green:!0})]}),children:[(0,f.jsx)(i.Z.TabPane,{tab:"Kho Trung Quốc",children:(0,f.jsx)(o.wQF,{rowKey:"Id",columns:G,data:v,pagination:!1},"1")},"1"),(0,f.jsx)(i.Z.TabPane,{tab:"Kho Việt Nam",children:(0,f.jsx)(o.wQF,{rowKey:"Id",columns:G,data:C,pagination:!1},"2")},"2"),(0,f.jsx)(i.Z.TabPane,{tab:"Phương thức vận chuyển",children:(0,f.jsx)(o.wQF,{rowKey:"Id",columns:[{title:"ID",dataIndex:"Id",align:"right"},{title:"Ng\xe0y tạo",dataIndex:"Created",render:function(a){return s.Jy.getVNDate(a,"DD/MM/YYYY - HH:mm:A")}},{title:"Phương thức vận chuyển",dataIndex:"Name"},{dataIndex:"Active",title:"Trạng th\xe1i",render:function(a,b,c){return(0,f.jsx)(p.Z,{color:a?"blue":"red",statusName:a?"Hiện":"Ẩn"})}},{title:"Cập nhật mới nhất",dataIndex:"Updated",render:function(a){return a?s.Jy.getVNDate(a,"DD/MM/YYYY - HH:mm:A"):"---"}},{title:function(){return(0,f.jsx)(f.Fragment,{children:"Nh\xe2n vi\xean cập nhật"})},dataIndex:"UpdatedBy"},{align:"right",title:"Thao t\xe1c",dataIndex:"action",render:function(a,b){return(0,f.jsx)(h.Z,{children:(0,f.jsx)(o.Kkx,{onClick:function(){r.current=w({},b,{IsWareHouse:!1}),q(!0)},title:"Cập nhật phương thức",icon:"fas fa-edit"})})}},],data:F,pagination:!1},"3")},"3")]}),b&&(0,f.jsx)(x,{onCancel:function(){return c(!1)},visible:b,refetchFrom:u,refetchTo:B}),e&&(0,f.jsx)(y,{onCancel:function(){return g(!1)},visible:e,refetchMethod:E}),r.current&&(0,f.jsx)(z,{onCancel:function(){r.current=null,q(!1)},visible:m,defaultValues:r.current,refetchFrom:u,refetchTo:B,refetchMethod:E})]})};A.displayName=null===r.B|| void 0===r.B?void 0:r.B.settings.wareHouse,A.breadcrumb=q.m.settings.wareHouse,A.Layout=o.Ar2,b.default=A}},function(a){a.O(0,[675,296,3662,7570,7281,9930,9774,2888,179],function(){return a(a.s=42152)}),_N_E=a.O()}])