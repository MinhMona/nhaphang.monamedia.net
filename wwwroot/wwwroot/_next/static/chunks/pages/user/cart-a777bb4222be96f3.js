(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9557],{89128:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/cart",function(){return c(2167)}])},2167:function(a,b,c){"use strict";c.r(b);var d=c(28520),e=c.n(d),f=c(85893),g=c(27049),h=c(11163),i=c(67294),j=c(87536),k=c(88767),l=c(25617),m=c(72132),n=c(48880),o=c(61474),p=c(12023),q=c(93702),r=c(15755),s=c(12954);function t(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function u(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){t(f,d,e,g,h,"next",a)}function h(a){t(f,d,e,g,h,"throw",a)}g(void 0)})}}function v(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function w(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){v(a,b,c[b])})}return a}var x=function(){var a=(0,k.useQueryClient)(),b=(0,j.cI)({mode:"onBlur",defaultValues:{Id:1}}),c=b.control,d=b.handleSubmit,h=u(e().mark(function b(c){var d,f;return e().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=null==c?void 0:c.SearchItem,f=null==c?void 0:c.Id){b.next=5;break}return m.Am.warning("Bạn chưa chọn shop!"),b.abrupt("return");case 5:if(d){b.next=8;break}return m.Am.warning("Bạn chưa nhập nội dung t\xecm kiếm!"),b.abrupt("return");case 8:try{a.fetchQuery([],function(){return m.Am.info("Đang search ..."),n.OF.getSearch({site:f,content:d}).then(function(a){window.open(null==a?void 0:a.Data)})})}catch(e){m.Am.error}case 9:case"end":return b.stop()}},b)}));return(0,f.jsxs)("div",{className:"tableBox cartSearch",children:[(0,f.jsx)("div",{className:"cartSearch-title",children:"T\xecm kiếm sản phẩm"}),(0,f.jsxs)("div",{className:"cartSearch-box",children:[(0,f.jsx)("div",{className:"cartSearch-select",children:(0,f.jsx)(o.ihX,{control:c,name:"Id",select:{label:"name",value:"id"},defaultValue:p.h3[0],placeholder:"",label:"",data:p.h3,indicatorSeparator:null,required:!1,styles:{control:function(a){return w({},a,{width:120,backgroundColor:"transparent",borderRadius:"4px",border:"none"})},menu:function(a){return w({},a,{width:"120px",top:"110%"})}}})}),(0,f.jsx)(g.Z,{type:"vertical",className:"!h-5 bg-[#e1e1e1]"}),(0,f.jsxs)("div",{className:"cartSearch-input",children:[(0,f.jsx)(o.ytj,{control:c,name:"SearchItem",type:"text",placeholder:"Nhập sản phẩm t\xecm kiếm (Nhấn enter)",allowClear:!1,onEnter:d(h),inputClassName:"!border-none"}),(0,f.jsx)("div",{className:"cartSearch-button",onClick:d(h),children:(0,f.jsx)("i",{className:"far fa-search"})})]})]})]})},y=function(){var a=(0,l.v9)(function(a){return a.userCurretnInfo}),b=(0,h.useRouter)(),c=(0,i.useState)([]),d=c[0],g=c[1],j=(0,i.useState)(),p=j[0],q=j[1],t=(0,i.useState)(0),v=t[0],y=t[1],z=(0,i.useState)([]),A=z[0],B=z[1],C=(0,i.useState)(!0),D=C[0],E=C[1],F=(0,r.TL)(),G=(0,k.useQuery)(["user-cart",b],function(){return n.c6.getList({UID:null==a?void 0:a.Id})},{onSuccess:function(a){var b,c=null==a?void 0:null===(b=a.Data)|| void 0===b?void 0:b.Items.map(function(a){var b=JSON.parse(null==a?void 0:a.OrderTempsJson);return w({},a,{OrderTemps:b})});E(!1),g(c)},onError:function(a){var b,c,d;m.Am.error(null===(b=a)|| void 0===b?void 0:null===(c=b.response)|| void 0===c?void 0:null===(d=c.data)|| void 0===d?void 0:d.ResultMessage)},retry:!1,refetchOnWindowFocus:!0,staleTime:5000,keepPreviousData:!0}),H=G.refetch,I=G.isLoading,J=G.isFetching,K=u(e().mark(function a(){return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:F((0,r.Pv)(A)),b.push("/user/cart/payment");case 2:case"end":return a.stop()}},a)}));return(0,f.jsxs)(i.Fragment,{children:[window.innerWidth>=680&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(x,{})}),D&&(0,f.jsx)("div",{className:"pt-[120px]",children:(0,f.jsx)(o.gbz,{})}),d.length<=0&&!D&&(0,f.jsx)(o.HYy,{}),d.length>0&&(0,f.jsxs)("div",{className:"cartNewWrapper pb-[100px] md:pb-[50px]",children:[(0,f.jsxs)("div",{className:"flex flex-wrap gap-1 items-center justify-between lg:mb-4",children:[(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,f.jsx)("span",{className:"cartNewWrapper-label",children:"Tổng shop:"}),(0,f.jsx)("span",{className:"text-[20px] text-red font-bold",children:s.Jy.getVND(null==d?void 0:d.length,"")})]}),(0,f.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,f.jsx)("span",{className:"cartNewWrapper-label",children:"Tổng sản phẩm:"}),(0,f.jsx)("span",{className:"text-[20px] text-red font-bold",children:s.Jy.getVND(d.reduce(function(a,b){var c;return a+((null===(c=b.OrderTemps)|| void 0===c?void 0:c.length)||0)},0),"")})]})]}),(0,f.jsxs)("div",{className:"",children:[(0,f.jsx)("span",{className:"cartNewWrapper-label",children:"Tổng tiền:"}),(0,f.jsx)("span",{className:"text-[20px] text-red font-bold ml-2",children:s.Jy.getVND(null==d?void 0:d.reduce(function(a,b){return a+=null==b?void 0:b.PriceVND},0)," đ")})]})]}),(0,f.jsx)("div",{className:"cartNewWrapper-orders pb",children:(0,f.jsx)(o.ugr,{currentCart:d,note:p,setNote:q,toggleShopId:function(a){B(function(b){var c;return -1===b.indexOf(a)?((function(a){if(Array.isArray(a)){for(var b=0,c=new Array(a.length);b<a.length;b++)c[b]=a[b];return c}})(c=b)||(function(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)})(c)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance")})()).concat([a]):b.filter(function(b){return b!==a})})},chosenShopIds:A,refetchCart:H,isFetching:J})}),(0,f.jsx)("div",{className:"cartNewWrapper-amount",children:(0,f.jsx)(o.MKk,{isFetching:J,currentCart:d,allShopIds:A,chosenShopIds:A,toggleAllShopId:function(){B(A.length<=0?null==d?void 0:d.map(function(a){return null==a?void 0:a.Id}):[]),y(A.length<=0?function(){return d.reduce(function(a,b){return a+=null==b?void 0:b.PriceVND},0)}:0)},onPress:K,refetchCart:H})})]})]})};y.displayName=q.W.shopping.shopingBag,y.breadcrumb=p.m.shoppingCart,y.Layout=o.rfd,b.default=y}},function(a){a.O(0,[675,296,3662,7570,7281,9930,9774,2888,179],function(){return a(a.s=89128)}),_N_E=a.O()}])